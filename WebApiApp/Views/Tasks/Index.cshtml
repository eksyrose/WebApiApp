@model IEnumerable<WebApiApp.Tasks>

@{
    ViewBag.Title = "Список задач";
}

<h2>Список задач</h2>

@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")


@Html.Partial("~/Views/Tasks/Create.cshtml", new WebApiApp.Tasks())

<!-- modal placeholder-->
<div id='myModal' class='modal fade in'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div id='myModalContent'></div>
        </div>
    </div>
</div>


<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Status)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Status)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id }, new { @class = "btn btn-default viewDialog", data_dialog_title = "Редактирование модели" }) |
                @*  @Html.ActionLink("Details", "Details", new { id = item.Id }) | *@
                @*    @Html.ActionLink("Delete", "Delete", new { id = item.Id }, new { @class = "btn btn-default viewDialog", data_dialog_title = "Удаление модели" }) *@
                @Html.Partial("~/Views/Tasks/Delete.cshtml", item)
            </td>
        </tr>
    }

</table>

@section scripts
{
    <script type="text/javascript">

        function goBack() {
            window.history.back();
        }

        $(function () {
            $.ajaxSetup({ cache: false });
            $(".btn btn -default viewDialog").click(function (e) {

                e.preventDefault();
                $.get(this.href, function (data) {
                    $('#dialogContent').html(data);
                    $('#modDialog').modal('show');
                });
            });
        })
    </script>
}

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/bootstrap")
